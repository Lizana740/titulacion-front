"use strict";(self.webpackChunkdicrea=self.webpackChunkdicrea||[]).push([[446],{3446:(j,_,c)=>{c.r(_),c.d(_,{ActuadorModule:()=>z});var m=c(6895),s=c(3060),a=c(4006),A=c(5226),u=c.n(A),t=c(4650),h=c(3435);let g=(()=>{class o{constructor(e){this.genericServices=e,this.url="/actuador/"}getActuadores(){return this.genericServices.getGeneric(this.url,"lista")}agregarActuador(e,i){return this.genericServices.postGeneric(this.url,e,i)}deleteActuador(e){return this.genericServices.deleteGeneric(this.url,e,"")}obtenerActuadorPorId(e){return this.genericServices.getGeneric(this.url,e)}actualizarActuador(e,i){return this.genericServices.postGeneric(this.url+"actualizar/",e,i)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(h.M))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=c(9549),f=c(4144);let T=(()=>{class o{constructor(e,i,r,l){this.actuadorServices=e,this._formBuilder=i,this.activatedRoute=r,this.router=l,this.formulario=this._formBuilder.group({modelo:["",a.kI.required],tipo:["",a.kI.required],descripcion:["",a.kI.required]})}ngOnInit(){this.activatedRoute.paramMap.subscribe(e=>{this.id=parseInt(e.get("id_actuador")),this.actuadorServices.obtenerActuadorPorId(this.id).subscribe(i=>{var r=i.data;this.formulario=this._formBuilder.group({modelo:[r.modelo,a.kI.required],tipo:[r.tipo,a.kI.required],descripcion:[r.descripcion,a.kI.required]})})})}add(){u().fire({title:"\xbfEstas seguro de guardar los cambios?",text:"Podras volver a editarlos en esta misma secci\xf3n",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Actualizar"}).then(e=>{e.isConfirmed&&this.actuadorServices.actualizarActuador(this.id,this.formulario.value).subscribe(i=>{this.router.navigate(["app/actuador/listar"]),u().fire("\xc9xito","Tus datos han sido actualizados.","success")},i=>{u().fire({icon:"error",title:"Oops...",text:"La actualizaci\xf3n de tus datos no se a podido concretar!"})})})}volver(){this.router.navigate(["/app/actuador/listar"])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g),t.Y36(a.qu),t.Y36(s.gz),t.Y36(s.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-editar"]],decls:41,vars:1,consts:[[1,"m-3","mt-3"],[1,"card"],[1,"card-header",2,"color","grey"],[1,"mb-4",3,"formGroup","ngSubmit"],[1,"container"],[1,"row"],[1,"col"],[1,"col-sm-10"],["appearance","outline",2,"width","100%"],["matInput","","placeholder","Tipo","formControlName","tipo","required",""],["matInput","","placeholder","ej: RELE-4","formControlName","modelo","required",""],[1,"col-sm-12"],["matInput","","placeholder","Ubicaci\xf3n del sensor dentro de la instalaci\xf3n , ","formControlName","descripcion"],[1,"col-1"],["type","submit",1,"btn","btn-success"],[1,"col-2"],[1,"btn","btn-danger",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4," Editar Actuador"),t.qZA()(),t.TgZ(5,"form",3),t.NdJ("ngSubmit",function(){return i.add()}),t._UZ(6,"br"),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"h2")(11,"b"),t._uU(12,"Tipo"),t.qZA()(),t.TgZ(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),t._uU(16,"Ingrese tipo de actuador"),t.qZA(),t._UZ(17,"input",9),t.qZA()()(),t.TgZ(18,"div",6)(19,"h2"),t._uU(20,"Modelo"),t.qZA(),t.TgZ(21,"div",7)(22,"mat-form-field",8)(23,"mat-label"),t._uU(24,"Ingrese el modelo"),t.qZA(),t._UZ(25,"input",10),t.qZA()()()(),t.TgZ(26,"div",5)(27,"h2"),t._uU(28,"Descripci\xf3n"),t.qZA(),t.TgZ(29,"div",11)(30,"mat-form-field",8)(31,"mat-label"),t._uU(32,"Ingrese una descripci\xf3n"),t.qZA(),t._UZ(33,"textarea",12),t.qZA()()(),t.TgZ(34,"div",5)(35,"div",13)(36,"button",14),t._uU(37,"Guardar"),t.qZA()(),t.TgZ(38,"div",15)(39,"button",16),t.NdJ("click",function(){return i.volver()}),t._uU(40,"Cancelar"),t.qZA()()()()()()()),2&e&&(t.xp6(5),t.Q6J("formGroup",i.formulario))},dependencies:[p.KE,p.hX,f.Nt,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u]}),o})();var b=c(3238),v=c(3608),C=c(805),d=c(47),I=c(4385),U=c(1493);function q(o,n){1&o&&(t.TgZ(0,"th",33),t._uU(1,"Acciones"),t._UZ(2,"p-sortIcon"),t.qZA())}function x(o,n){if(1&o&&(t.TgZ(0,"tr"),t._UZ(1,"th",25),t.TgZ(2,"th",26),t._uU(3,"Nombre Estaci\xf3n"),t._UZ(4,"p-sortIcon",27),t.qZA(),t.TgZ(5,"th",28),t._uU(6,"Ubicaci\xf3n"),t._UZ(7,"p-sortIcon",29),t.qZA(),t.TgZ(8,"th",30),t._uU(9,"Conectados "),t._UZ(10,"p-sortIcon",31),t.qZA(),t.YNc(11,q,3,0,"th",32),t.qZA()),2&o){const e=t.oxw();t.xp6(11),t.Q6J("ngIf","ADMINISTRADOR"==e.rol)}}function L(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td")(1,"button",36),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.add(r.id_estacion))}),t._UZ(2,"i",37),t.qZA()()}}function N(o,n){if(1&o&&(t.TgZ(0,"tr")(1,"td")(2,"button",34),t._UZ(3,"i"),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.YNc(10,L,3,0,"td",35),t.qZA()),2&o){const e=n.$implicit,i=n.expanded,r=t.oxw();t.xp6(2),t.Q6J("pRowToggler",e),t.xp6(1),t.Tol(i?"pi pi-chevron-down":"pi pi-chevron-right"),t.xp6(2),t.Oqu(e.nombre),t.xp6(2),t.Oqu(e.ubicacion),t.xp6(2),t.Oqu(e.actuadores.length),t.xp6(1),t.Q6J("ngIf","ADMINISTRADOR"==r.rol)}}function y(o,n){1&o&&(t.TgZ(0,"tr")(1,"th",42),t._uU(2,"Modelo "),t._UZ(3,"p-sortIcon",43),t.qZA(),t.TgZ(4,"th",44),t._uU(5," Tipo"),t._UZ(6,"p-sortIcon",45),t.qZA(),t.TgZ(7,"th",46),t._uU(8,"Descripci\xf3n"),t._UZ(9,"p-sortIcon",47),t.qZA(),t.TgZ(10,"th",48),t._uU(11,"Acciones"),t.qZA()())}function k(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",52),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.eliminarActuador(r.id_actuador))}),t._UZ(1,"i",53),t.qZA()}}function J(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.editarActuador(r.id_actuador))}),t._UZ(1,"i",55),t.qZA()}}function S(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.configurar(r.id_actuador))}),t._UZ(1,"i",57),t.qZA()}}function D(o,n){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",10),t.YNc(8,k,2,0,"button",49),t.YNc(9,J,2,0,"button",50),t.TgZ(10,"div"),t.YNc(11,S,2,0,"button",51),t.qZA()()()),2&o){const e=n.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(e.modelo),t.xp6(2),t.Oqu(e.tipo),t.xp6(2),t.Oqu(e.descripcion),t.xp6(2),t.Q6J("ngIf","ADMINISTRADOR"==i.rol),t.xp6(1),t.Q6J("ngIf","ADMINISTRADOR"==i.rol),t.xp6(2),t.Q6J("ngIf","MANTENEDOR"==i.rol)}}function w(o,n){1&o&&(t.TgZ(0,"tr")(1,"td",58),t._uU(2,"No hay actuadores actualmente conectados"),t.qZA()())}function F(o,n){if(1&o&&(t.TgZ(0,"tr")(1,"td",38)(2,"div",39)(3,"p-table",40),t.YNc(4,y,12,0,"ng-template",4),t.YNc(5,D,12,6,"ng-template",5),t.YNc(6,w,3,0,"ng-template",41),t.qZA()()()()),2&o){const e=n.$implicit;t.xp6(3),t.Q6J("value",e.actuadores)}}function G(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",59),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.display=!r.display)}),t._UZ(1,"i",53),t._uU(2," Cancelar"),t.qZA(),t.TgZ(3,"button",60),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.agregarActuador())}),t._UZ(4,"i",61),t._uU(5," Agregar"),t.qZA()}}function M(o,n){if(1&o&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.p),t.xp6(1),t.AsE(" ",e.p," - ",e.tipo," ")}}function E(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",59),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.displayConfig=!r.displayConfig)}),t._UZ(1,"i",62),t._uU(2," Cancelar"),t.qZA(),t.TgZ(3,"button",60),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.configurarActuador())}),t._UZ(4,"i",63),t._uU(5," Guardar"),t.qZA()}}const Y=function(){return{width:"50vw"}},Z=function(){return{"960px":"75vw"}},B=function(){return{width:"60vw",height:"38vw"}},O=[{path:"listar",component:(()=>{class o{constructor(e,i,r){this.actuadorService=e,this._formBuilder=i,this.router=r,this.display=!1,this.id_estacion=-1,this.displayConfig=!1,this.rol=localStorage.getItem("rol"),this.puertos=[{p:"D1",tipo:"DIGITAL"},{p:"D2",tipo:"DIGITAL"},{p:"D3",tipo:"DIGITAL"},{p:"D4",tipo:"DIGITAL"},{p:"D5",tipo:"DIGITAL"},{p:"D6",tipo:"DIGITAL"},{p:"D7",tipo:"DIGITAL"},{p:"D8",tipo:"DIGITAL"},{p:"D9",tipo:"DIGITAL"},{p:"A0",tipo:"ANALOGICO"}],this.formulario=this._formBuilder.group({descripcion:["",a.kI.required],tipo:["",a.kI.required],escala:["",a.kI.required],modelo:["",a.kI.required]}),this.formularioCongig=this._formBuilder.group({puerto:["",a.kI.required],map:["",a.kI.required],voltaje:["",a.kI.required]})}ngOnInit(){this.getActuadores()}getActuadores(){this.actuadorService.getActuadores().subscribe(e=>{this.lista=e.data})}add(e){this.display=!0,this.id_estacion=e}eliminarActuador(e){u().fire({title:"\xbfEstas seguro de eliminar?",text:"Los cambios seran permanentes",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Si, eliminar"}).then(i=>{i.isConfirmed&&this.actuadorService.deleteActuador(e).subscribe(r=>{this.getActuadores()})},i=>{u().fire({icon:"error",title:"Oops...",text:"No se ha podido eliminar el actuador!"})})}agregarActuador(){this.actuadorService.agregarActuador(this.id_estacion,this.formulario.value).subscribe(i=>{u().fire({icon:"success",title:"Actuador a\xf1adido con \xe9xito!!",showConfirmButton:!1,timer:1500}),this.getActuadores(),this.display=!1})}editarActuador(e){this.router.navigate([`app/actuador/${e}`])}configurar(e){this.displayConfig=!0}configurarActuador(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g),t.Y36(a.qu),t.Y36(s.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-lista"]],decls:76,vars:24,consts:[[1,"m-3","mt-3"],[1,"card"],[1,"card-header",2,"color","grey"],["dataKey","nombre",3,"value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["header","Agregar Actuador",1,"m-3","mt-3",2,"background-color","red",3,"visible","breakpoints","draggable","resizable","modal","visibleChange"],[1,"mb-4",3,"formGroup"],[1,"container"],[1,"row"],[1,"col"],[1,"col-sm-10"],["appearance","outline",2,"width","100%"],["matInput","","placeholder","Tipo","formControlName","tipo","required",""],["matInput","","placeholder","ej: RELE-4","formControlName","modelo","required",""],[1,"col-sm-12"],["matInput","","placeholder","Ubicaci\xf2n del sensor dentro de la instalaci\xf3n , ","formControlName","descripcion"],["pTemplate","footer"],["header","Configurar Actuador",1,"m-3","mt-3",3,"visible","breakpoints","draggable","resizable","modal","visibleChange"],["placeholder","Modelo","formControlName","puerto"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","ej: [1-100], [0-1000] ","formControlName","map","required",""],["placeholder","Modelo","formControlName","voltaje"],[3,"value"],[2,"width","5rem"],["pSortableColumn","nombre"],["field","nombre"],["pSortableColumn","ubicacion"],["field","ubicacion"],["pSortableColumn","id_estacion"],["field","category"],["pSortableColumn","",4,"ngIf"],["pSortableColumn",""],["type","button","pTooltip","Expandir","tooltipPosition","top",1,"btn",3,"pRowToggler"],[4,"ngIf"],["pTooltip","A\xf1adir","tooltipPosition","top",1,"btn","btn-success",3,"click"],[1,"pi","pi-plus-circle"],["colspan","5"],[1,"p-3"],["dataKey","id_actuador",3,"value"],["pTemplate","emptymessage"],["pSortableColumn","modelo"],["field","customer"],["pSortableColumn","tipo"],["field","date"],["pSortableColumn","descripcion"],["field","amount"],[2,"width","4rem"],["class","btn btn-danger col","style","margin-right: 5px;","pTooltip","Eliminar","tooltipPosition","top",3,"click",4,"ngIf"],["class","btn btn-warning col",3,"click",4,"ngIf"],["class","btn btn-primary text-white",3,"click",4,"ngIf"],["pTooltip","Eliminar","tooltipPosition","top",1,"btn","btn-danger","col",2,"margin-right","5px",3,"click"],[1,"pi","pi-trash"],[1,"btn","btn-warning","col",3,"click"],["pTooltip","Editar","tooltipPosition","top",1,"pi","pi-pencil",2,"color","white"],[1,"btn","btn-primary","text-white",3,"click"],["pTooltip","Configurar","tooltipPosition","top",1,"pi","pi-cog"],["colspan","6"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"pi","pi-save"],[1,"pi","pi-times"],[1,"pi","pi-check"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4," Lista de Actuadores"),t.qZA()(),t.TgZ(5,"p-table",3),t.YNc(6,x,12,1,"ng-template",4),t.YNc(7,N,11,7,"ng-template",5),t.YNc(8,F,7,1,"ng-template",6),t.qZA()()(),t.TgZ(9,"p-dialog",7),t.NdJ("visibleChange",function(l){return i.display=l}),t.TgZ(10,"form",8),t._UZ(11,"br"),t.TgZ(12,"div",9)(13,"div",10)(14,"div",11)(15,"h2"),t._uU(16,"Tipo"),t.qZA(),t.TgZ(17,"div",12)(18,"mat-form-field",13)(19,"mat-label"),t._uU(20,"Ingrese tipo de actuador"),t.qZA(),t._UZ(21,"input",14),t.qZA()()(),t.TgZ(22,"div",11)(23,"h2"),t._uU(24,"Modelo"),t.qZA(),t.TgZ(25,"div",12)(26,"mat-form-field",13)(27,"mat-label"),t._uU(28,"Ingrese el modelo"),t.qZA(),t._UZ(29,"input",15),t.qZA()()()(),t.TgZ(30,"div",10)(31,"h2"),t._uU(32,"Descripci\xf3n"),t.qZA(),t.TgZ(33,"div",16)(34,"mat-form-field",13)(35,"mat-label"),t._uU(36,"Ingrese una descripci\xf3n"),t.qZA(),t._UZ(37,"textarea",17),t.qZA()()()()(),t.YNc(38,G,6,0,"ng-template",18),t.qZA(),t.TgZ(39,"p-dialog",19),t.NdJ("visibleChange",function(l){return i.displayConfig=l}),t.TgZ(40,"form",8),t._UZ(41,"br"),t.TgZ(42,"div",9)(43,"div",10)(44,"div",11)(45,"h2"),t._uU(46,"Puerto "),t.qZA(),t.TgZ(47,"div",12)(48,"mat-form-field",13)(49,"mat-label"),t._uU(50,"Sleccione un puerto"),t.qZA(),t.TgZ(51,"mat-select",20),t.YNc(52,M,2,3,"mat-option",21),t.qZA()()()()(),t.TgZ(53,"div",10)(54,"div",11)(55,"h2"),t._uU(56,"Rangos "),t.qZA(),t.TgZ(57,"div",12)(58,"mat-form-field",13)(59,"mat-label"),t._uU(60,"Ingrese rango de mapeo"),t.qZA(),t._UZ(61,"input",22),t.qZA()()()(),t.TgZ(62,"div",10)(63,"div",11)(64,"h2"),t._uU(65,"Tensi\xf3n "),t.qZA(),t.TgZ(66,"div",12)(67,"mat-form-field",13)(68,"mat-label"),t._uU(69,"Voltaje de operai\xf3n"),t.qZA(),t.TgZ(70,"mat-select",23)(71,"mat-option",24),t._uU(72," 3.3 V"),t.qZA(),t.TgZ(73,"mat-option",24),t._uU(74," 5 V"),t.qZA()()()()()()()(),t.YNc(75,E,6,0,"ng-template",18),t.qZA()),2&e&&(t.xp6(5),t.Q6J("value",i.lista),t.xp6(4),t.Akn(t.DdM(20,Y)),t.Q6J("visible",i.display)("breakpoints",t.DdM(21,Z))("draggable",!1)("resizable",!1)("modal",!0),t.xp6(1),t.Q6J("formGroup",i.formulario),t.xp6(29),t.Akn(t.DdM(22,B)),t.Q6J("visible",i.displayConfig)("breakpoints",t.DdM(23,Z))("draggable",!1)("resizable",!1)("modal",!0),t.xp6(1),t.Q6J("formGroup",i.formularioCongig),t.xp6(12),t.Q6J("ngForOf",i.puertos),t.xp6(19),t.Q6J("value",3.3),t.xp6(2),t.Q6J("value",5))},dependencies:[m.sg,m.O5,b.ey,v.u,C.jx,d.iA,d.lQ,d.jB,d.fz,p.KE,p.hX,I.gD,f.Nt,U.V,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u]}),o})(),data:{breadcrumb:{label:"Lista de actuadores"}}},{path:":id_actuador",component:T,data:{breadcrumb:{label:"Editar actuador"}}}];let Q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[s.Bz.forChild(O),s.Bz]}),o})();var R=c(5782);let z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.ez,Q,R.m]}),o})()}}]);